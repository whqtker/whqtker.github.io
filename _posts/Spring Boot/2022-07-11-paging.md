---
title : "[JPA] Paging"
date : 2025-07-11 08:45:00 +0900
categories : [Spring Boot]
tags : [java, spring boot, jpa, paging, μ¤ν”„λ§ λ¶€νΈ]
---

## π“ Pagingμ΄λ€?

`Paging` μ€ μ „μ²΄ λ°μ΄ν„°λ¥Ό ν• λ²μ— μ΅°νν•λ” κ²ƒμ΄ μ•„λ‹, μΌμ • ν¬κΈ°μ νμ΄μ§€ λ‹¨μ„λ΅ λ¶„ν• ν•μ—¬ μ΅°νν•λ” λ°©λ²•μ΄λ‹¤. λ€λ‰μ λ°μ΄ν„°λ¥Ό ν• λ²μ— μ΅°νν•  λ• λ°μƒν•λ” λ©”λ¨λ¦¬ μ‚¬μ©λ‰ λ¬Έμ λ¥Ό ν•΄κ²°ν•  μ μλ‹¤.

## π“ κµ¬μ„± μ”μ†

### Pageable

`Pageable` λ” νμ΄μ§• μ •λ³΄λ¥Ό μ¶”μƒν™”ν• μΈν„°νμ΄μ¤μ΄λ‹¤. νμ΄μ§€ λ²νΈ, ν•λ‚μ νμ΄μ§€μ— ν¬ν•¨λ  λ°μ΄ν„°μ μ, λ°μ΄ν„° μ •λ ¬ κΈ°μ¤€ λ° λ°©ν–¥κ³Ό κ°™μ€ μ •λ³΄λ¥Ό ν•λ‚μ κ°μ²΄λ΅ λ¬¶μ–΄μ„ κ΄€λ¦¬ν•λ‹¤.

```java
@GetMapping("/users")
public Page<UserDto> getUsers(Pageable pageable) {
    return userService.getUsers(pageable);
}
```

`Spring MVC` λ” HTTP request νλΌλ―Έν„°μ μΏΌλ¦¬λ¥Ό λ¶„μ„ν•μ—¬ μλ™μΌλ΅ `Pageable` κ°μ²΄λ¥Ό λ§λ“¤ μ μλ‹¤.

ex) `/users?page=0&size=10&sort=id,desc` 

```java
@GetMapping("/users")
public Page<UserDto> getUsers(
    @PageableDefault(size = 10, sort = "id", direction = Sort.Direction.DESC)
    Pageable pageable) {
    
    return userService.getUsers(pageable);
}
```

```yaml
spring:
  data:
    web:
      pageable:
        default-page-size: 10
        max-page-size: 100
        one-indexed-parameters: false
```

λ§μ•½ νμ΄μ§• νλΌλ―Έν„°μ κΈ°λ³Έ κ°’μ„ μ„¤μ •ν•κ³  μ‹¶λ‹¤λ©΄ `@PageableDefault` μ–΄λ…Έν…μ΄μ…μ„ μ‚¬μ©ν•κ±°λ‚, μ• ν”λ¦¬μΌ€μ΄μ… μ„¤μ • νμΌμ— μ „μ—­ μ„¤μ •μ„ μ μ©ν•λ‹¤.

```java
@GetMapping("/dashboard")
public String getDashboard(
    @Qualifier("user") @PageableDefault(size = 5) Pageable userPageable,
    @Qualifier("post") @PageableDefault(size = 10) Pageable postPageable,
    Model model) {
    
    // ...
}

```

λ§μ•½ ν•λ‚μ μ»¨νΈλ΅¤λ¬μ— μ—¬λ¬ κ°μ `Pageable` κ°μ²΄λ¥Ό μ‚¬μ©ν•΄μ•Ό ν•λ” κ²½μ°, `@Qualifier` μ–΄λ…Έν…μ΄μ…μ„ μ‚¬μ©ν•λ‹¤. νλΌλ―Έν„° μ ‘λ‘μ‚¬λ¥Ό λ³΄κ³  μ¬λ°”λ¥Έ `Pageable` κ°μ²΄μ— λ§¤ν•‘λ  μ μλ„λ΅ ν•λ‹¤.

ex) `/dashboard?user_page=0&user_size=5&post_page=1&post_size=10`

### PageRequest

`PageRequest` λ” `Pageable` μΈν„°νμ΄μ¤μ κµ¬ν„μ²΄λ΅, `of` λ©”μ„λ“λ¥Ό ν†µν•΄ νμ΄μ§€ μ •λ³΄λ¥Ό μ§μ ‘ μƒμ„±ν•λ‹¤. `page` λ” 0λ¶€ν„° μ‹μ‘ν•΄μ•Ό ν•λ©°, `size` λ” 1 μ΄μƒμ΄μ–΄μ•Ό ν•λ‹¤.

```java
// static PageRequest of(int page, int size)
PageRequest request= PageRequest.of(0, 10);
```

### Sort

`Sort` λ” JPAμ—μ„ λ°μ΄ν„° μ •λ ¬μ„ μ„ν• μ •λ³΄λ¥Ό μΊ΅μν™”ν•λ” ν΄λμ¤μ΄λ‹¤. μ—¬λ¬ μ •λ ¬ μ΅°κ±΄μ„ ν•λ‚μ κ°μ²΄λ΅ κ΄€λ¦¬ν•  μ μλ‹¤. μ΄ν›„ μΏΌλ¦¬λ΅ λ³€ν™λ  λ• `ORDER BY` μ κ³Ό μƒμ‘λλ‹¤.

```java
Pageable pageable = PageRequest.of(0, 10, 
    Sort.by("name").ascending().and(Sort.by("createdAt").descending()));

Page<User> users = userRepository.findAll(pageable);
```

`PageRequest` μ™€ κ°™μ΄ νμ΄μ§•κ³Ό μ •λ ¬μ„ λ™μ‹μ— μ²λ¦¬ν•  λ• κ°™μ΄ μ‚¬μ©λ  μ μλ‹¤.

## π“ νμ΄μ§• λ¦¬ν„΄ νƒ€μ…

### Page<T>

`Page` κ°μ²΄λ” λ‹¤μ–‘ν• ν•νƒμ νμ΄μ§• μ •λ³΄λ¥Ό μ κ³µν•λ‹¤. μ „μ²΄ μ›μ†μ μμ™€ μ „μ²΄ νμ΄μ§€ μλ¥Ό κ³„μ‚°ν•λ‹¤.

```sql
SELECT β€¦ FROM β€¦ ORDER BY β€¦ LIMIT :size OFFSET :offset
SELECT COUNT(*) FROM β€¦
```

λ‚΄λ¶€μ μΌλ΅ λ‘ κ°μ μΏΌλ¦¬λ¥Ό μ‹¤ν–‰ν•λ”λ°, λ°μ΄ν„°λ¥Ό μ΅°νν•λ” μΏΌλ¦¬, λ°μ΄ν„° μ „μ²΄ κ°μλ¥Ό μ΅°νν•λ” μΏΌλ¦¬λ¥Ό μ‹¤ν–‰ν•λ‹¤.

```java
@Transactional(readOnly = true)
public Page<UserDto> findUsers(Pageable pageable) {
    Page<User> userPage = userRepository.findAll(pageable);
    
    return userPage.map(UserDto::new);
}
```

`map` λ©”μ„λ“λ¥Ό μ‚¬μ©ν•λ©΄ `Page<Entity>` λ¥Ό `Page<DTO>` λ΅ μ‰½κ² λ³€ν™ν•  μ μλ‹¤. λ³€ν™ μ‹ νμ΄μ§€λ„¤μ΄μ… κ΄€λ ¨ λ©”νƒ€λ°μ΄ν„°λ¥Ό κ·Έλ€λ΅ μ μ§€λλ‹¤.

### Slice<T>

`Slice` κ°μ²΄λ” μ „μ²΄ λ°μ΄ν„° κ°μλ¥Ό κ³„μ‚°ν•μ§€ μ•κ³  λ‹¤μ νμ΄μ§€μ μ΅΄μ¬ μ—¬λ¶€λ§ ν™•μΈν•λ‹¤. `Page` κ°μ²΄λ” μ „μ²΄ νμ΄μ§€ μλ¥Ό μ΅°νν•λ” `COUNT` μΏΌλ¦¬λ¥Ό μ‹¤ν–‰ν•μ§€λ§ `Slice` κ°μ²΄λ¥Ό μ‹¤ν–‰ν•μ§€ μ•λ”λ‹¤. **μ¦‰, μ΅°ν μΏΌλ¦¬ ν• λ²λ§ μ‹¤ν–‰ν•λ‹¤.**

> λ€λ‰μ λ°μ΄ν„°μ—μ„ `COUNT` μΏΌλ¦¬λ” λ³‘λ© ν„μƒμ΄ λ°μƒν•  μ μλ‹¤.
> 

### List<T>

`List` νƒ€μ…μΌλ΅ λ¦¬ν„΄λλ©΄, νμ΄μ§• λ©”νƒ€λ°μ΄ν„° μ—†μ΄ λ‹¨μν λ°μ΄ν„°λ§ λ¦¬ν„΄ν•λ‹¤.

---

- `Page` κ°μ²΄λ” νμ΄μ§€ λ²νΈ, μ „μ²΄ λ°μ΄ν„° μλ¥Ό μ‚¬μ©ν•΄μ•Ό ν•  λ•, νΉμ • νμ΄μ§€λ΅ μ΄λ™ν•΄μ•Ό ν•  λ• μ μ©ν•λ‹¤.
- `Slice` κ°μ²΄λ” λ¬΄ν• μ¤ν¬λ΅¤κ³Ό κ°™μ΄ λ‹¤μ λ°μ΄ν„°μ μ λ¬΄λ§ ν™•μΈν•  λ• μ μ©ν•λ‹¤.
- `List` νƒ€μ…μ€ κ³ μ •λ κ°μμ λ°μ΄ν„°λ§ μ‚¬μ©ν•  λ•, νμ΄μ§• λ©”νƒ€λ°μ΄ν„°κ°€ ν•„μ” μ—†μ„ λ• μ μ©ν•λ‹¤.